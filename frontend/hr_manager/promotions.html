<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promotions | hrFlo</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #0a0a0a 0%, #0f0f0f 25%, #1a0f2e 50%, #0d0d0d 100%); color: #fff; min-height: 100vh; }
        .app { display: flex; }
        /* Sidebar Styles */
        .sidebar { width: 280px; background: linear-gradient(135deg, #111111 0%, #1a1a2e 50%, #16213e 100%); border-right: 1px solid rgba(99, 102, 241, 0.1); position: fixed; height: 100vh; display: flex; flex-direction: column; z-index: 100;}
        .sidebar-header { padding: 24px 20px; border-bottom: 1px solid rgba(99, 102, 241, 0.1); }
        .brand-logo { font-size: 24px; font-weight: 700; }
        .nav { padding: 20px 12px; flex-grow: 1; }
        .nav-section-title { font-size: 11px; text-transform: uppercase; color: rgba(255, 255, 255, 0.4); padding: 16px; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; color: rgba(255, 255, 255, 0.7); text-decoration: none; border-radius: 10px; }
        .nav-item i { font-size: 18px; width: 20px; text-align: center; }
        .nav-item:hover, .nav-item.active { background: rgba(99, 102, 241, 0.15); color: #fff; }
        /* Main Content Styles */
        .main { flex: 1; margin-left: 280px; padding: 20px 32px; }
        .page-header h1 { font-size: 32px; font-weight: 700; margin-bottom: 24px;}
        .card { background: linear-gradient(135deg, rgba(17, 17, 17, 0.9) 0%, rgba(26, 26, 46, 0.8) 100%); border: 1px solid rgba(99, 102, 241, 0.1); border-radius: 16px; padding: 32px; margin-bottom: 24px; }
        .card-title { font-size: 20px; font-weight: 600; margin-bottom: 20px; }
        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px; }
        input, select { width: 100%; padding: 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 10px; color: #fff; font-family: 'Poppins', sans-serif; }
        .btn-primary { padding: 12px 24px; background: #6366f1; color: #fff; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;}
        table { width: 100%; border-collapse: collapse; }
        th, td { text-align: left; padding: 16px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        th { font-size: 12px; text-transform: uppercase; color: rgba(255, 255, 255, 0.6); }
    </style>
</head>
<body>
    <div class="app">
        <aside class="sidebar">
            <header class="sidebar-header"><div class="brand-logo">hrFlo</div></header>
            <nav class="nav">
                <a class="nav-item" href="dashboard.html"><i class="fas fa-chart-line"></i><span>Dashboard</span></a>
                <a class="nav-item" href="job_posting.html"><i class="fas fa-briefcase"></i><span>Job Postings</span></a>
                <a class="nav-item active" href="promotions.html"><i class="fas fa-arrow-up"></i><span>Promotions</span></a>
                <a class="nav-item" href="succession_planning.html"><i class="fas fa-sitemap"></i><span>Succession Planning</span></a>
            </nav>
        </aside>
        <main class="main">
            <div class="page-header"><h1>Employee Promotions</h1></div>
            <div class="card">
                <h2 class="card-title">Initiate a New Promotion</h2>
                <form id="promotionForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="employeeId">Employee</label>
                            <select id="employeeId" required></select>
                        </div>
                        <div class="form-group">
                            <label for="newPosition">New Position</label>
                            <input type="text" id="newPosition" required>
                        </div>
                        <div class="form-group">
                            <label for="promotionDate">Promotion Date</label>
                            <input type="date" id="promotionDate" required>
                        </div>
                    </div>
                    <button type="submit" class="btn-primary">Submit for Approval</button>
                </form>
            </div>
            <div class="card">
                <h2 class="card-title">Pending & Approved Promotions</h2>
                <table>
                    <thead><tr><th>Employee</th><th>New Position</th><th>Date</th><th>Status</th></tr></thead>
                    <tbody id="promotionsTableBody"></tbody>
                </table>
            </div>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Fetch employees for dropdown
            fetch('http://127.0.0.1:5000/api/employees').then(res => res.json()).then(employees => {
                const select = document.getElementById('employeeId');
                employees.forEach(emp => {
                    select.innerHTML += `<option value="${emp.userID}">${emp.firstName} ${emp.lastName}</option>`;
                });
            });

            // Fetch and display existing promotions
            fetch('http://127.0.0.1:5000/api/promotions').then(res => res.json()).then(promotions => {
                const tbody = document.getElementById('promotionsTableBody');
                promotions.forEach(p => {
                    tbody.innerHTML += `<tr><td>${p.employeeName}</td><td>${p.newPosition}</td><td>${p.promotionDate}</td><td>${p.status}</td></tr>`;
                });
            });
        });
    </script>
</body>
</html>
